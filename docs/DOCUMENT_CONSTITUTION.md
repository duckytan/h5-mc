# 📜 文档宪法

> **生效日期**: 2026-01-22
> **版本**: 1.0.0

本文档规定了 MC-H5 项目文档的创建、维护和组织规范。所有项目参与者（包括 AI 助手）必须遵守。

---

## 第一条：创建新文档前的强制检查

**任何人在创建新的 `.md` 文档前，必须执行以下检查：**

```
1. 扫描项目根目录的所有 .md 文件
2. 分析新文档的主题和分类
3. 检查是否存在同类文档（主题重叠 ≥ 50%）
4. 若存在同类文档 → 在原有文档添加内容
5. 若不存在 → 创建新文档
```

**检查命令**：
```bash
# 列出所有 Markdown 文件
ls *.md

# 搜索相关主题
grep -l "关键词" *.md
```

---

## 第二条：同类文档判定标准

当新文档主题与现有文档满足以下任一条件，判定为**同类文档**：

| 条件 | 说明 |
|------|------|
| 主题重叠 ≥ 50% | 讨论相同领域或功能 |
| 目标读者相同 | 都面向开发者或都面向用户 |
| 生命周期重叠 | 有效期内会被同时更新 |
| 章节可合并 | 内容可无缝拼接 |

**示例**：
- 新文档"开发规范"与 `DEVELOPMENT.md` → 同类 → 合并
- 新文档"API 参考"与 `DEVELOPMENT.md` → 同类 → 合并
- 新文档"部署到 AWS"与 `DEPLOYMENT.md` → 同类 → 合并

---

## 第三条：文档分类体系

所有文档必须归属以下类别之一：

| 类别 | 前缀/位置 | 说明 |
|------|----------|------|
| **入口文档** | `README.md` | 项目概览，快速导航 |
| **开发规范** | `DEVELOPMENT.md` | 代码风格、构建、测试 |
| **功能文档** | `FEATURES.md` | 特性清单、路线图 |
| **部署文档** | `DEPLOYMENT.md` | 部署流程、平台配置 |
| **AI指南** | `CLAUDE.md` | AI助手指令 |
| **模块文档** | `src/**/CLAUDE.md` | 模块级详细文档 |

**规则**：每个类别只保留**一份**主文档。

---

## 第四条：强关联写入规则

### 4.1 必须建立强关联的场景

当文档 A 与文档 B 存在以下关系时，必须在 A 中写入指向 B 的强关联信息：

| 关系类型 | 必须在 A 中写入 |
|----------|----------------|
| A 是 B 的前提知识 | "阅读 [B](./B.md) 前，请先了解..." |
| B 是 A 的延伸阅读 | "详情见 [B](./B.md)" |
| A 和 B 互相补充 | "与 [B](./B.md) 配合使用" |
| A 依赖 B 的配置 | "配置说明见 [B](./B.md)" |

### 4.2 强关联格式

**标准格式**（推荐，在文档末尾或相关章节末尾）：

```markdown
## 相关文档

- [文档名称](./文档路径.md) - 一句话说明关系
```

**内联格式**（用于正文中引用）：

```markdown
详情请参阅 [DEVELOPMENT.md](./DEVELOPMENT.md) 中的"代码风格"章节。
```

### 4.3 最小关联要求

每个文档**至少**要有：

1. **一个入口关联**：`README.md` 的链接
2. **一个延伸关联**：指向更详细或更相关的文档
3. **一个反向关联**：被引用的文档要添加"也被以下文档引用"

---

## 第五条：文档生命周期

```
┌─────────────┐
│   创建      │ ← 必须检查同类文档
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   审查      │ ← 检查强关联是否完整
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   生效      │ ← 文档可被引用
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   维护      │ ← 关联文档更新时同步检查
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   废弃(可选)│ ← 标记废弃，保留引用指向新文档
└─────────────┘
```

---

## 第六条：违反宪法的惩罚

| 违规行为 | 惩罚 |
|----------|------|
| 未检查同类文档直接创建新文档 | 强制合并，驳回 PR |
| 新文档与同类文档无强关联 | 补充关联前不得合并 |
| 文档间引用断裂（被引用者无反向引用） | 补充双向引用 |
| 创建重复文档 | 删除冗余文档，警告一次 |

---

## 第七条：宪法修订

1. 修订需在 `README.md` 中声明版本号
2. 重大修订需更新所有文档的关联声明
3. AI 助手每次启动时读取本文档

---

## 附录：检查清单

**创建新文档前**：

- [ ] 扫描现有 `.md` 文件
- [ ] 识别主题分类
- [ ] 判断是否存在同类文档
- [ ] 如存在，在同类文档中添加内容
- [ ] 如不存在，创建新文档
- [ ] 在 `README.md` 添加链接
- [ ] 在相关文档添加强关联
- [ ] 添加双向引用

---

**最后更新**: 2026-01-22
